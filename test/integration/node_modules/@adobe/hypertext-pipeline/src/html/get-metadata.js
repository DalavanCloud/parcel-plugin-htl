const filter = require("unist-util-filter");
const select = require("unist-util-select");
const yaml = require("yaml");

module.exports = function({ resource, resource: { mdast } }) {
    const yamls = select(mdast, "yaml"); // select all YAML nodes
    const mapped = yamls.map(({value}) => yaml.eval(value));
    const meta = Object.assign(...mapped);
    
    return { resource: {meta: meta }};
};
