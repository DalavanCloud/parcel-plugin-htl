const client = require("request-promise");

module.exports = function({
    REPO_RAW_ROOT = "https://raw.githubusercontent.com/"
}) {
    return ({
        request,
        resource,
        context,
        request: {
            params: { owner, repo, ref, path }
        }
    } = {}) => {
        //console.log(request);

        const options = {
            uri: `${REPO_RAW_ROOT}${owner}/${repo}/${ref}/${path}`,
            headers: {
                "User-Agent": "Request-Promise"
            },
            json: false
        };

        console.log("Requesting " + options.uri);
        return client(options)
            .then(console.log)
            .catch(console.error);
    };
};
